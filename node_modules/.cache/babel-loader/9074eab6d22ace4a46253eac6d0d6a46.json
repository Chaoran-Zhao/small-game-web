{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/23703/OneDrive/\\u684C\\u9762/exam/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/23703/OneDrive/\\u684C\\u9762/exam/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/23703/OneDrive/\\u684C\\u9762/exam/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import*as React from'react';import'../App.css';function Home(){var _React$useState=React.useState(localStorage.getItem('X')),_React$useState2=_slicedToArray(_React$useState,2),XValue=_React$useState2[0],setXValue=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),reset=_React$useState4[0],setReset=_React$useState4[1];var callAPI=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('https://cgi.cse.unsw.edu.au/~cs6080/raw/data/score.json',{method:'GET'}).then(function(data){return data.json();}).then(function(res){console.log('fetching',res);setXValue(res.score);localStorage.setItem('X',res.score);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function callAPI(){return _ref.apply(this,arguments);};}();React.useEffect(function(){if(localStorage.getItem('X')===undefined||localStorage.getItem('X')===null){callAPI();}},[reset]);var congrate=function congrate(){alert('Congratulations!');localStorage.removeItem('X');setReset(!reset);};React.useEffect(function(){if(XValue===0){congrate();}},[XValue]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",style:{textAlign:'center'},children:/*#__PURE__*/_jsxs(\"div\",{style:{color:'blue',fontSize:'2em'},children:[\" Please choose an option from the sidebar.\",/*#__PURE__*/_jsx(\"br\",{}),\"Games left to win: \",XValue,\" \",/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){localStorage.removeItem('X');setReset(!reset);// localStorage.setItem('X', parseInt(XValue) - 1);\n// setXValue(parseInt(XValue) - 1);\n},children:\"Reset\"})]})})});}export default Home;","map":{"version":3,"sources":["C:/Users/23703/OneDrive/桌面/exam/src/pages/main.js"],"names":["React","Home","useState","localStorage","getItem","XValue","setXValue","reset","setReset","callAPI","fetch","method","then","data","json","res","console","log","score","setItem","useEffect","undefined","congrate","alert","removeItem","textAlign","color","fontSize"],"mappings":"0mBAAA,MAAO,GAAKA,CAAAA,KAAZ,KAAuB,OAAvB,CAEA,MAAO,YAAP,CACA,QAASC,CAAAA,IAAT,EAAgB,qBACYD,KAAK,CAACE,QAAN,CAAeC,YAAY,CAACC,OAAb,CAAqB,GAArB,CAAf,CADZ,oDACPC,MADO,qBACCC,SADD,0CAEUN,KAAK,CAACE,QAAN,CAAe,KAAf,CAFV,qDAEPK,KAFO,qBAEAC,QAFA,qBAId,GAAMC,CAAAA,OAAO,0FAAG,yJACRC,CAAAA,KAAK,CAAC,yDAAD,CAA2D,CAACC,MAAM,CAAE,KAAT,CAA3D,CAAL,CACLC,IADK,CACA,SAACC,IAAD,QAAQA,CAAAA,IAAI,CAACC,IAAL,EAAR,EADA,EAELF,IAFK,CAEA,SAACG,GAAD,CAAO,CACXC,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAuBF,GAAvB,EACAT,SAAS,CAACS,GAAG,CAACG,KAAL,CAAT,CACAf,YAAY,CAACgB,OAAb,CAAqB,GAArB,CAAyBJ,GAAG,CAACG,KAA7B,EACD,CANK,CADQ,uDAAH,kBAAPT,CAAAA,OAAO,0CAAb,CASAT,KAAK,CAACoB,SAAN,CAAgB,UAAM,CACpB,GAAIjB,YAAY,CAACC,OAAb,CAAqB,GAArB,IAA4BiB,SAA5B,EAAyClB,YAAY,CAACC,OAAb,CAAqB,GAArB,IAA4B,IAAzE,CAA8E,CAC5EK,OAAO,GACR,CACF,CAJD,CAIG,CAACF,KAAD,CAJH,EAMA,GAAMe,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrBC,KAAK,CAAC,kBAAD,CAAL,CACApB,YAAY,CAACqB,UAAb,CAAwB,GAAxB,EACAhB,QAAQ,CAAC,CAACD,KAAF,CAAR,CACD,CAJD,CAMAP,KAAK,CAACoB,SAAN,CAAgB,UAAM,CACpB,GAAIf,MAAM,GAAG,CAAb,CAAe,CACbiB,QAAQ,GACT,CACF,CAJD,CAIG,CAACjB,MAAD,CAJH,EAMA,mBAAO,sCACP,YAAK,SAAS,CAAC,WAAf,CAA2B,KAAK,CAAE,CAACoB,SAAS,CAAC,QAAX,CAAlC,uBACE,aAAK,KAAK,CAAE,CAACC,KAAK,CAAC,MAAP,CAAeC,QAAQ,CAAC,KAAxB,CAAZ,qEAAsF,aAAtF,uBACoBtB,MADpB,kBAC4B,eAAQ,OAAO,CAAE,kBAAI,CAC/CF,YAAY,CAACqB,UAAb,CAAwB,GAAxB,EACAhB,QAAQ,CAAC,CAACD,KAAF,CAAR,CACA;AACA;AACD,CAL2B,mBAD5B,GADF,EADO,EAAP,CAWD,CACD,cAAeN,CAAAA,IAAf","sourcesContent":["import * as React from 'react';\r\n\r\nimport '../App.css';\r\nfunction Home() {\r\n  const [XValue, setXValue]=React.useState(localStorage.getItem('X'))\r\n  const [reset, setReset]=React.useState(false)\r\n\r\n  const callAPI = async () =>{\r\n    await fetch('https://cgi.cse.unsw.edu.au/~cs6080/raw/data/score.json',{method: 'GET'})\r\n    .then((data)=>data.json())  \r\n    .then((res)=>{\r\n      console.log('fetching',res);\r\n      setXValue(res.score);\r\n      localStorage.setItem('X',res.score)\r\n    })\r\n  }\r\n  React.useEffect(() => {\r\n    if (localStorage.getItem('X')===undefined || localStorage.getItem('X')===null){\r\n      callAPI()\r\n    }\r\n  }, [reset]);\r\n\r\n  const congrate = () => {\r\n    alert('Congratulations!' );\r\n    localStorage.removeItem('X');\r\n    setReset(!reset);\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if (XValue===0){\r\n      congrate()\r\n    }\r\n  }, [XValue]);\r\n\r\n  return <>\r\n  <div className='container' style={{textAlign:'center'}}>\r\n    <div style={{color:'blue', fontSize:'2em'}}> Please choose an option from the sidebar.<br />\r\n    Games left to win: {XValue} <button onClick={()=>{\r\n      localStorage.removeItem('X');\r\n      setReset(!reset)\r\n      // localStorage.setItem('X', parseInt(XValue) - 1);\r\n      // setXValue(parseInt(XValue) - 1);\r\n    }}>Reset</button></div>\r\n  </div></>\r\n  \r\n}\r\nexport default Home;"]},"metadata":{},"sourceType":"module"}